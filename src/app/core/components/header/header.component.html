@let role = authService.getRole();

<header class="w-full bg-white border border-gray-300 px-6 py-3 flex justify-between items-center fixed z-50">
  <img src="images/logo.png" alt="logo" class="h-14 ml-3 md:ml-10 lg:ml-14 cursor-pointer" routerLink="/">

  <nav class="hidden lg:flex gap-8 mr-8">
    @let email = authService.getEmail();

    <div class="mx-6">
      <a class="cursor-pointer hover:underline" routerLink="/submissions">Мої заявки</a>
    </div>

    @if (email) {
      <a class="text-red-500 cursor-pointer hover:underline" (click)="logout()">Вийти з акаунту</a>
      <p>|</p>
      <p class="text-gray-600 transition hover:text-gray-500">{{ email }}</p>
      @if (role == 'Admin') {
        <span class="ml-2 bg-red-100 text-red-700 font-semibold text-sm px-2.5 py-0.5 rounded-full border border-red-300">
          Адмін
        </span>
      } @else if (role == 'Owner') {
        <span class="ml-2 bg-yellow-100 text-yellow-800 font-semibold text-sm px-2.5 py-0.5 rounded-full border border-yellow-300">
          Власник
        </span>
        <div class="ml-2 relative" (click)="toggleAdminDropdown()">
        <button 
          class="bg-red-500 hover:bg-red-600 hover:cursor-pointer text-white font-medium text-sm px-3 py-1 rounded-md shadow-sm transition flex items-center">
          Адмін-дії
          <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </button>

        @if (isAdminDropdownOpen) {
          <div class="absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-md shadow-lg z-10">
            <a routerLink="/submissions/pending" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Очікуючі заявки</a>
          </div>
        }
      </div>
      }
    } @else {
      <a class="cursor-pointer hover:underline text-gray-600" (click)="navigateToLogin()">Вхід в акаунт</a>
    }
  </nav>

  <button (click)="toggleMenu()" class="md:hidden pt-1">
    <span class="material-symbols-outlined text-black text-3xl">menu</span>
  </button>
</header>

<div
  class="fixed p-4 top-0 left-0 h-full w-full bg-white transform transition-transform duration-300 md:hidden z-50 border-r"
  [class.translate-x-0]="isMenuOpen"
  [class.-translate-x-full]="!isMenuOpen"
>
  <div class="p-6 flex justify-between items-center">
    <img src="images/logo.png" alt="logo" class="h-14 md:ml-10 lg:ml-14 cursor-pointer">
    <button (click)="toggleMenu()">
      <span class="material-symbols-outlined text-2xl hover:cursor-pointer">close</span>
    </button>
  </div>

  <nav class="flex flex-col gap-6 px-6 mt-3">
    <a href="#" class="hover:underline" (click)="toggleMenu()" routerLink="/">Головна сторінка</a>
    <a href="#" class="hover:underline" (click)="toggleMenu()" routerLink="/submissions">Мої заявки</a>
    @if (email) {
      <a class="text-red-500 cursor-pointer hover:underline" (click)="logout()">Вийти з акаунту</a>
    }
    <hr class="border-t border-gray-400 mt-2">
    @if (email) {
      <p class="text-gray-600 transition hover:text-gray-500">{{ email }}</p>
    } @else {
      <a class="cursor-pointer hover:underline" (click)="navigateToLogin()">Вхід в акаунт</a>
    }
  </nav>
</div>

@if (isMenuOpen) {
    <div
    class="fixed inset-0  bg-opacity-50 z-40 md:hidden"
    (click)="toggleMenu()"
    ></div>
}
